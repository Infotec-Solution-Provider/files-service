generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model File {
  id         Int         @id @default(autoincrement())
  id_storage String      @db.Uuid
  name       String      @db.VarChar(100)
  mime_type  String      @db.VarChar(100)
  size       Int
  dir_type   FileDirType
  storage_id Int

  storage Storage @relation(fields: [storage_id], references: [id], onUpdate: Restrict, map: "FK_FILE_STORAGE")

  @@map("files")
}

model Storage {
  id         Int             @id @default(autoincrement())
  instance   String          @db.VarChar(30)
  type       FileStorageType
  server_url String?
  timeout    Int?
  token      String?
  isDefault  Boolean         @default(false)

  files File[]

  @@map("storages")
}

enum FileStorageType {
  server
  client
}

enum FileDirType {
  public
  models
}
